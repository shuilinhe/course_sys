{"remainingRequest":"D:\\code\\zhuanyezonghesheji\\Combine_4\\Combine_1\\course-sys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\zhuanyezonghesheji\\Combine_4\\Combine_1\\course-sys\\src\\views\\CourseView\\Course.vue?vue&type=style&index=0&id=5f1aee22&prod&scoped=true&lang=css&","dependencies":[{"path":"D:\\code\\zhuanyezonghesheji\\Combine_4\\Combine_1\\course-sys\\src\\views\\CourseView\\Course.vue","mtime":1670769264000},{"path":"D:\\code\\zhuanyezonghesheji\\Combine_4\\Combine_1\\course-sys\\node_modules\\css-loader\\dist\\cjs.js","mtime":1667012056000},{"path":"D:\\code\\zhuanyezonghesheji\\Combine_4\\Combine_1\\course-sys\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1667012058000},{"path":"D:\\code\\zhuanyezonghesheji\\Combine_4\\Combine_1\\course-sys\\node_modules\\postcss-loader\\src\\index.js","mtime":1667012056000},{"path":"D:\\code\\zhuanyezonghesheji\\Combine_4\\Combine_1\\course-sys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667012054000},{"path":"D:\\code\\zhuanyezonghesheji\\Combine_4\\Combine_1\\course-sys\\node_modules\\vue-loader\\lib\\index.js","mtime":1667012058000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouYmlnQ29udGFpbmVyIHsNCiAgaGVpZ2h0OiA2NzBweDsNCn0NCg=="},{"version":3,"sources":["Course.vue"],"names":[],"mappings":";AAqdA;AACA;AACA","file":"Course.vue","sourceRoot":"src/views/CourseView","sourcesContent":["<template>\r\n  <div class=\"bigContainer\">\r\n    <div class=\"list\">\r\n      <div class=\"top\">\r\n        <el-input\r\n          placeholder=\"请输入课程名称\"\r\n          class=\"search-inp\"\r\n          v-model=\"queryInfo.name\"\r\n          style=\"width: 220px; margin-right: 10px\"\r\n          clearable\r\n        />\r\n        <el-input\r\n          placeholder=\"请输入老师姓名\"\r\n          class=\"search-inp\"\r\n          v-model=\"queryInfo.teacherName\"\r\n          style=\"width: 220px; margin-right: 10px\"\r\n          clearable\r\n        />\r\n        <el-button\r\n          icon=\"el-icon-search\"\r\n          type=\"primary\"\r\n          class=\"search_btn\"\r\n          @click=\"search\"\r\n          >搜索</el-button\r\n        >\r\n        <el-button\r\n          type=\"danger\"\r\n          class=\"delete_btn\"\r\n          :disabled=\"this.multipleSelection.length === 0\"\r\n          @click=\"deleteMany\"\r\n          ><i class=\"el-icon-delete\" id=\"delete_img\"></i>批量删除</el-button\r\n        >\r\n        <el-button plain class=\"refresh_btn\" @click=\"reload\"\r\n          ><i class=\"el-icon-refresh-right\" id=\"refresh_img\"></i>刷新</el-button\r\n        >\r\n        <el-button type=\"success\" class=\"fenlei_btn\" @click=\"classify\"\r\n          ><i class=\"el-icon-setting\" id=\"fenlei_img\"></i>分类</el-button\r\n        >\r\n        <el-upload\r\n          style=\"display: inline-flex; margin-left: 10px; font-size: 20px\"\r\n          :show-file-list=\"false\"\r\n          :before-upload=\"beforeUpload\"\r\n          :on-success=\"onSuccess\"\r\n          :on-error=\"onError\"\r\n          :disabled=\"importDataDisabled\"\r\n          action=\"http://124.71.112.154:8001/api/course/import\"\r\n        >\r\n          <el-button\r\n            type=\"primary\"\r\n            :icon=\"importDataBtnIcon\"\r\n            :disabled=\"importDataDisabled\"\r\n          >\r\n            {{ importDataBtnText }}\r\n          </el-button>\r\n        </el-upload>\r\n      </div>\r\n      <!-- 课程列表 -->\r\n      <el-table\r\n        class=\"s_table\"\r\n        resizable=\"true\"\r\n        border\r\n        ref=\"courseTable\"\r\n        :data=\"courselist\"\r\n        style=\"width: 100%\"\r\n        @selection-change=\"handleSelectionChange\"\r\n        height=\"600\"\r\n        :row-key=\"getRowKey\"\r\n      >\r\n        <el-table-column\r\n          fixed\r\n          type=\"selection\"\r\n          align=\"center\"\r\n          :reserve-selection=\"true\"\r\n        >\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"id\"\r\n          label=\"编号\"\r\n          align=\"center\"\r\n          width=\"100px\"\r\n          v-if=\"false\"\r\n        >\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          v-for=\"item in fieldlist\"\r\n          :key=\"item.serialNumber\"\r\n          :prop=\"item.prop\"\r\n          :label=\"item.label\"\r\n          :width=\"item.width\"\r\n          align=\"center\"\r\n        >\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          label=\"操作\"\r\n          fixed=\"right\"\r\n          align=\"center\"\r\n          width=\"200px\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              icon=\"el-icon-edit\"\r\n              size=\"mini\"\r\n              type=\"primary\"\r\n              @click=\"showEditView(scope.row)\"\r\n              >修改</el-button\r\n            >\r\n            <el-button\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.row)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页器 -->\r\n      <div>\r\n        <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          :page-size=\"limit\"\r\n          :current-page=\"page\"\r\n          layout=\"total,prev, pager, next\"\r\n          :total=\"total\"\r\n        >\r\n        </el-pagination>\r\n      </div>\r\n      <!-- 修改课程信息对话框 -->\r\n      <el-dialog\r\n        title=\"修改课程信息\"\r\n        :visible.sync=\"updateDialogVisible\"\r\n        width=\"30%\"\r\n      >\r\n        <el-form\r\n          :rules=\"course_rules\"\r\n          :model=\"updateCourseForm\"\r\n          ref=\"updateCourseForm\"\r\n          label-width=\"110px\"\r\n          size=\"small\"\r\n        >\r\n          <el-form-item prop=\"serialNumber\" label=\"序号:\">\r\n            <el-input v-model=\"updateCourseForm.serialNumber\" />\r\n          </el-form-item>\r\n          <el-form-item prop=\"openNumber\" label=\"开课编号:\">\r\n            <el-input v-model=\"updateCourseForm.openNumber\" />\r\n          </el-form-item>\r\n          <el-form-item prop=\"name\" label=\"课程名称:\">\r\n            <el-input v-model=\"updateCourseForm.name\" />\r\n          </el-form-item>\r\n          <el-form-item prop=\"teacherId\" label=\"任课教师编号:\">\r\n            <el-input v-model=\"updateCourseForm.teacherId\" />\r\n          </el-form-item>\r\n          <el-form-item prop=\"teacherName\" label=\"任课教师:\">\r\n            <el-input v-model=\"updateCourseForm.teacherName\" />\r\n          </el-form-item>\r\n          <el-form-item prop=\"campusDistrict\" label=\"开课校区:\">\r\n            <el-input v-model=\"updateCourseForm.campusDistrict\" />\r\n          </el-form-item>\r\n          <el-form-item prop=\"college\" label=\"开课学院:\">\r\n            <el-input v-model=\"updateCourseForm.college\" />\r\n          </el-form-item>\r\n          <el-form-item prop=\"remark\" label=\"备注:\">\r\n            <el-input v-model=\"updateCourseForm.remark\" />\r\n          </el-form-item>\r\n          <el-button @click=\"cancel\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"doUpdate\">确 定</el-button>\r\n        </el-form>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n    \r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      page: 1,\r\n      limit: 8,\r\n      queryInfo: {\r\n        name: \"\",\r\n        teacherName: \"\",\r\n      },\r\n      filedlist: [],\r\n      filelist: [],\r\n      importDataDisabled: false,\r\n      importDataBtnIcon: \"el-icon-upload2\",\r\n      importDataBtnText: \"导入数据\",\r\n      id: \"\",\r\n      courselist: [],\r\n      multipleSelection: [],\r\n      updateDialogVisible: false,\r\n      updateCourseForm: {\r\n        id: \"\",\r\n        campusDistrict: \"\",\r\n        category: \"\",\r\n        college: \"\",\r\n        courseNumber: \"\",\r\n        credit: \"\",\r\n        name: \"\",\r\n        nameOfClass: \"\",\r\n        numberOfClass: \"\",\r\n        openNumber: \"\",\r\n        planType: \"\",\r\n        practiceHours: \"\",\r\n        remark: \"\",\r\n        serialNumber: \"\",\r\n        teacherId: \"\",\r\n        teacherName: \"\",\r\n        theoryHours: \"\",\r\n        totalHours: \"\",\r\n        type: \"\",\r\n        version: \"\",\r\n        courseInfo: \"\",\r\n      },\r\n      total: 0,\r\n      course_rules: {\r\n        name: [{ required: true, message: \"请输入课程名称\", trigger: \"blur\" }],\r\n        teacherId: [\r\n          { required: true, message: \"请输入任课教师工号\", trigger: \"blur\" },\r\n        ],\r\n        serialNumber: [\r\n          { required: true, message: \"请输入序号\", trigger: \"blur\" },\r\n        ],\r\n        openNumber: [\r\n          { required: true, message: \"请输入开课编号\", trigger: \"blur\" },\r\n        ],\r\n        teacherName: [\r\n          { required: true, message: \"请输入任课教师姓名\", trigger: \"blur\" },\r\n        ],\r\n        campusDistrict: [\r\n          { required: true, message: \"请输入开课校区\", trigger: \"blur\" },\r\n        ],\r\n        college: [\r\n          { required: true, message: \"请输入开课学院\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.getFieldList();\r\n    this.getCourseList(this.page, this.limit, this.queryInfo);\r\n  },\r\n  methods: {\r\n    //获取字段行信息\r\n    getFieldList() {\r\n      this.fieldlist = [\r\n        { prop: \"serialNumber\", label: \"序号\", width: \"100\" },\r\n        { prop: \"courseNumber\", label: \"课程编号\", width: \"100\" },\r\n        { prop: \"openNumber\", label: \"开课编号\", width: \"100\" },\r\n        { prop: \"name\", label: \"课程名称\", width: \"200\" },\r\n        { prop: \"planType\", label: \"计划类型\", width: \"200\" },\r\n        { prop: \"college\", label: \"开课学院\", width: \"200\" },\r\n        { prop: \"type\", label: \"课程类别\", width: \"120\" },\r\n        { prop: \"category\", label: \"课程分类\", width: \"120\" },\r\n        { prop: \"nameofClass\", label: \"教学班名称\", width: \"80\" },\r\n        { prop: \"totalHours\", label: \"总学时\", width: \"80\" },\r\n        { prop: \"theoryHours\", label: \"理论学时\", width: \"80\" },\r\n        { prop: \"practiceHours\", label: \"实践学时\", width: \"80\" },\r\n        { prop: \"credit\", label: \"学分\", width: \"60\" },\r\n        { prop: \"numberOfClass\", label: \"选课人数\", width: \"80\" },\r\n        { prop: \"campusDistrict\", label: \"开课校区\", width: \"100\" },\r\n        { prop: \"teacherName\", label: \"任课教师\", width: \"80\" },\r\n        { prop: \"teacherId\", label: \"任课教师编号\", width: \"110\" },\r\n        { prop: \"remark\", label: \"备注\", width: \"80\" },\r\n        { prop: \"courseInfo\", label: \"课表信息\", width: \"150\" },\r\n      ];\r\n    },\r\n    //获取表格数据\r\n    async getCourseList(page = 1, limit, queryInfo) {\r\n      const { data: res } = await this.$http.post(\r\n        `/api/course/list/${page}/${limit}`,\r\n        queryInfo\r\n      );\r\n      this.courselist = res.data.rows;\r\n      this.total = res.data.total;\r\n    },\r\n    //功能1：搜索功能\r\n    async search(page, limit) {\r\n      page = 1;\r\n      limit = this.limit;\r\n      const { data: res } = await this.$http.post(\r\n        `/api/course/list/${page}/${limit}`,\r\n        this.queryInfo\r\n      );\r\n      this.courselist = res.data.rows;\r\n      this.handleCurrentChange();\r\n    },\r\n    //展示修改对话框\r\n    showEditView(data) {\r\n      this.updateCourseForm = data;\r\n      this.updateDialogVisible = true;\r\n      this.id = data.id;\r\n    },\r\n    //清空数据\r\n    cancel(){\r\n      this.updateDialogVisible = false\r\n      this.updateCourseForm = this.$options.data().updateCourseForm\r\n    },\r\n    \r\n    //功能2：修改课程信息\r\n    async doUpdate() {\r\n      await this.$refs.updateCourseForm\r\n        .validate()\r\n        .then(() => {\r\n          this.UpdateCourse();\r\n        })\r\n        .catch((err) => {\r\n          this.$message.error(\"请检查课程信息！\");\r\n        });\r\n    },\r\n    //功能2：修改课程信息\r\n    async UpdateCourse(id) {\r\n      id = this.id;\r\n      const { data: res } = await this.$http.put(\r\n        `/api/course/${id}`,\r\n        this.updateCourseForm\r\n      );\r\n      this.updateDialogVisible = false;\r\n      if (res.success) {\r\n        this.updateDialogVisible = false;\r\n        this.$message.success(res.message);\r\n        this.getCourseList(this.page, this.limit, this.queryInfo);\r\n      } else {\r\n        this.$message.error(res.message);\r\n      }\r\n      this.updateCourseForm = this.$options.data().updateCourseForm\r\n    },\r\n    //功能3：删除课程\r\n    async handleDelete(data) {\r\n      const confirmResult = await this.$confirm(\r\n        \"此操作将永久删除 [ \" + data.name + \" ] 课程, 是否继续?\",\r\n        \"提示\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n          center: true,\r\n        }\r\n      ).catch((err) => err);\r\n      if (confirmResult !== \"confirm\") {\r\n        return this.$message.info(\"已取消\");\r\n      }\r\n      const { data: res } = await this.$http.delete(`/api/course/${data.id}`);\r\n      if (res.success) {\r\n        this.$message.success(res.message);\r\n        this.getCourseList(this.page, this.limit, this.queryInfo);\r\n      }\r\n    },\r\n    //功能4：批量删除课程\r\n    async deleteMany() {\r\n      const confirmResult = await this.$confirm(\r\n        \"此操作将永久删除[\" +\r\n          this.multipleSelection.length +\r\n          \"]条课程信息, 是否继续?\",\r\n        \"提示\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n          center: true,\r\n        }\r\n      ).catch((err) => err);\r\n      if (confirmResult !== \"confirm\") {\r\n        return this.$message.info(\"已取消\");\r\n      }\r\n      let ids = \"\";\r\n      this.multipleSelection.forEach((item) => {\r\n        //循环数组\r\n        ids += item.id + \",\";\r\n      });\r\n      ids = ids.substring(0, ids.length - 1); //去掉拼接路径的最后一个逗号\r\n      const { data: res } = await this.$http.delete(\r\n        `/api/course/deleteBatchByIds`,\r\n        {\r\n          params: {\r\n            idList: ids,\r\n          },\r\n        }\r\n      );\r\n      if (res.success) {\r\n        this.$message.success(res.message);\r\n        console.log(res);\r\n        this.$refs.courseTable.clearSelection();\r\n        this.getCourseList(this.page, this.limit, this.queryInfo);\r\n      } else {\r\n        this.$message.error(res.message);\r\n      }\r\n    },\r\n    //功能5：课程分类\r\n    async classify() {\r\n      await this.$confirm(\"是否确认分类?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n        center: true,\r\n      })\r\n        .then(() => {\r\n          this.handleClassify();\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消分类\",\r\n          });\r\n        });\r\n    },\r\n    //课程分类\r\n    async handleClassify() {\r\n      const {data:res} = await this.$http.get(`/api/course/classify`)\r\n      if (res.success == false){\r\n        this.$message.error(res.message);\r\n      }else{\r\n        window.location.href = \"http://124.71.112.154:8001/api/course/classify\";\r\n      }\r\n    },\r\n    //功能6：导入数据\r\n    onSuccess(response,file,fileList) {\r\n      if (response.code == 20001) {\r\n        this.$message.error(response.message);\r\n        this.$refs.upload.handleRemove(file);\r\n      } else {\r\n        location.reload();\r\n      }\r\n      this.importDataBtnIcon = \"el-icon-upload2\";\r\n      this.importDataBtnText = \"导入数据\";\r\n      this.importDataDisabled = false; //不禁用\r\n\r\n    },\r\n    handleRemove(file, fileList) {\r\n      this.filelist = fileList\r\n    },\r\n    //上传请求失败\r\n    onError() {\r\n      this.importDataBtnIcon = \"el-icon-upload2\";\r\n      this.importDataBtnText = \"导入数据\";\r\n      this.importDataDisabled = false; //不禁用\r\n      this.$message.error(\"文件上传失败\");\r\n    },\r\n    //正在上传\r\n    beforeUpload() {\r\n      this.importDataBtnIcon = \"el-icon-loading\";\r\n      this.importDataBtnText = \"正在导入\";\r\n      this.importDataDisabled = true; //正在导入时禁止再上传文件\r\n    },\r\n    //保存不同页之间的多选\r\n    getRowKey(row) {\r\n      return row.id;\r\n    },\r\n    //获取复选框选中行信息\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n    },\r\n    //刷新\r\n    reload() {\r\n      location.reload();\r\n    },\r\n    //分页器页面跳转\r\n    handleCurrentChange(val) {\r\n      this.page = val;\r\n      this.getCourseList(this.page, this.limit, this.queryInfo);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.bigContainer {\r\n  height: 670px;\r\n}\r\n</style>"]}]}